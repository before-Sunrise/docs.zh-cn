# CORR

## 功能

返回两个随机变量的皮尔逊相关系数

## 语法

```Haskell
CORR(expr1, expr2)
```

## 参数说明

`expr1`: 选取的表达式1

`expr2`: 选取的表达式2

## 返回值说明

返回值为Double类型，其中n为该表的行数。计算公式如下:
$$
\frac{\sum_{i=1}^{n}((x_i - \bar{x})(y_i - \bar{y}))}{\sqrt{\sum_{i=1}^{n}((x_i - \bar{x})^2) \cdot \sum_{i=1}^{n}((y_i - \bar{y})^2)}}
$$


## 使用说明

* 计算相关系数时，只有同一行的两列数据都不为null时，该行数据才会被统计到最终结果中，否则该行数据会被忽略。

* 当n为1时，返回值为0。

## 示例

对于以下数据表：

```
mysql> select * from agg;
+------+-------+-------+
| no   | k     | v     |
+------+-------+-------+
|    1 | 10.00 |  NULL |
|    2 | 10.00 | 11.00 |
|    2 | 20.00 | 22.00 |
|    2 | 25.00 |  NULL |
|    2 | 30.00 | 35.00 |
+------+-------+-------+
```

计算列k和列v的相关系数:

```plain text
mysql> select no,CORR(k,v) from agg group by no;
+------+--------------------+
| no   | corr(k, v)         |
+------+--------------------+
|    1 |               NULL |
|    2 | 0.9988445981121532 |
+------+--------------------+
```

